<!DOCTYPE html>
<html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Dev.Isaac" /></head>
<style>@import url(/public/css/syntax/monokai.css);</style>
  <title>Dev.Isaac</title>
  <!-- <link href="/public/css/bootstrap.min.css" rel="stylesheet"> -->

  <link href="/public/css/style.css" rel="stylesheet">
  <body>
  	<div class="container"> 
		<div class="sidebar">
			<div class="sidebar-item sidebar-header">
	<div class='sidebar-brand'>
		<a href="/about/">Dev.Isaac</a>
	</div>
	<p class="lead">정이삭 공부블로그</p></div>

<div class="sidebar-item sidebar-nav">
	<ul class="nav">
      <li class="nav-title">Pages</li>
	  <li>
	  	<a class="nav-item" href="/">Articles</a>
	  </li>
	  
	  
	    
	  
	    
	      
	        <li>
	        	<a class="nav-item" href="/about/">
	            	About
	            </a>
	        </li>
	      
	    
	  
	    
	      
	    
	  
	    
	  
	    
	  
	</ul>
</div>

<div class="sidebar-item sidebar-nav">
  	<ul class="nav">
			<li class="nav-title">Categories</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#TIL">
				<span class="name">TIL</span>
				<span class="badge">27</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Linux">
				<span class="name">Linux</span>
				<span class="badge">5</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Network">
				<span class="name">Network</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Java">
				<span class="name">Java</span>
				<span class="badge">6</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Data Structure">
				<span class="name">Data Structure</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Algorithm">
				<span class="name">Algorithm</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#OS">
				<span class="name">OS</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Docker">
				<span class="name">Docker</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Mysql">
				<span class="name">Mysql</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	  </nav>
	</ul>
</div>

<div class="sidebar-item sidebar-footer">
	<p>Powered by <a href="https://github.com/jekyll/jekyll">Jekyll</a></p>
</div>
		</div>
		<div class="content">
			<article class="post">
	<header class="post-header">
		<div class="post-title"> 
			Docker mysql 이미지 실행 및 한글설정
		</div>
		<time class="post-date dt-published" datetime="2021-01-28T00:00:00+09:00" itemprop="datePublished">2021/01/28
		</time>		
	</header>

	<div class="post-content">
		<h3 id="docker-docs를-참고하여-진행했습니다">Docker Docs를 참고하여 진행했습니다.</h3>

<p><a href="https://docs.docker.com/engine/reference/commandline/">Docker Docs</a></p>

<h2 id="mysql-이미지를-컨테이너로-실행하고-설정한-기록">mysql 이미지를 컨테이너로 실행하고 설정한 기록</h2>

<ol>
  <li>
    <p>docker hub 에서 mysql image pull 받기</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull mysql:5.7
</code></pre></div>    </div>
  </li>
  <li>
    <p>image를 container로 실행하기(-d는 background로 실행, -e는 환경변수 설정한다는 뜻)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run <span class="nt">--name</span> mysql <span class="nt">-e</span> <span class="nv">MYSQL_ROOT_PWD</span><span class="o">=</span>비밀번호 <span class="nt">-d</span> mysql:5.7
</code></pre></div>    </div>
  </li>
  <li>
    <p>컨테이너에게 exec명령어로 bash 실행하기 (-i는 Keep STDIN open even if not attached라는 뜻, -t 는 psedo TTY를 할당한다)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docer <span class="nb">exec</span> <span class="nt">-it</span> mysql /bin/bash
</code></pre></div>    </div>
  </li>
  <li>
    <p>locale 설정하기 (Debian Linux 기준입니다.)</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt update
apt upgrade
apt <span class="nb">install</span> <span class="nt">-y</span> locales locales-all
dpkg-reconfigure locales <span class="c">#여기서 실행되는 프로그램에서 ko_KR.UTF-8을 선택</span>
</code></pre></div>    </div>

    <p>4-1) 현재 컨테이너를 이미지로 만든 후 LC_ALL 환경변수를 ko_KR.UTF-8로 변경하여 재실행한다.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker commit mysql isaac/mysql
docker container <span class="nb">rm </span>mysql
docker run <span class="nt">--name</span> mysql <span class="nt">-e</span> <span class="nv">LC_ALL</span><span class="o">=</span>ko_KR.UTF-8 <span class="nt">-d</span> isaac/mysql
</code></pre></div>    </div>
  </li>
  <li>
    <p>mysql -uroot -p비밀번호 명령어를 통해 mysql 접속한다.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql -uroot -p루트비번
</code></pre></div>    </div>
  </li>
  <li>
    <p>status 명령어로 현재 설정 확인하면 characterset이 latin1로 되어있는 걸 확인할 수 있다.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql&gt; status
--------------
mysql  Ver 14.14 Distrib 5.7.33, for Linux (x86_64) using  EditLine wrapper
   
Connection id:		3
Current database:	
Current user:		root@localhost
SSL:			Not in use
Current pager:		stdout
Using outfile:		''
Using delimiter:	;
Server version:		5.7.33 MySQL Community Server (GPL)
Protocol version:	10
Connection:		Localhost via UNIX socket
Server characterset:	latin1
Db     characterset:	latin1
Client characterset:	latin1
Conn.  characterset:	latin1
UNIX socket:		/var/run/mysqld/mysqld.sock
Uptime:			49 min 29 sec
   
Threads: 1  Questions: 7  Slow queries: 0  Opens: 105  Flush tables: 1  Open tables: 98  Queries per second avg: 0.002
--------------
</code></pre></div>    </div>
  </li>
  <li>
    <p>/etc/mysql/mysql.conf.d/mysqld.cnf 파일을 수정해준다. (도커허브 mysql:5.7 이미지 기준입니다.)</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//아래 내용을 파일에 추가해준다.
[client]
default-character-set=utf8
   
[mysql]
default-character-set=utf8
   
[mysqld]
collation-server = utf8_unicode_ci
init-connect='SET NAMES utf8'
character-set-server = utf8
</code></pre></div>    </div>
  </li>
  <li>
    <p>docer container 명령어로 restart시켜준다</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker container restart mysql
</code></pre></div>    </div>
  </li>
</ol>


	</div>
</article>
		</div>
	</div>
  </body>
</html>